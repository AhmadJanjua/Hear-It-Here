{% extends 'templates/base.html' %}
{% block content %}
<body>
    <section>
        <div class="main">
            <h1>Hear It Here</h1>
            <h2>add sub-sentence here!!!!!!!!!!!!!!!!!</h2>
            <br><br><br>
            <a href="{% url 'forum:categories' %}" class="button">View categories</a>
            <a href="{% url 'forum:posts' category_id=1 %}" class="button">Artist Discussion</a>
            <a href="{% url 'forum:posts' category_id=2 %}" class="button">Artist Discussion</a>
            {% if user.is_authenticated %}
                <a href="{% url 'account:logout' %}" class='button'>Logout</a>
            {% else %}
                <a href="account/signup" class="button">Sign Up</a>
                <a href="{% url 'account:login' %}" class="button">Login</a>
            {% endif %}
        </div>
    </section>

    <dialog class="create-post">
        <h1>Create a Post</h1>
        <a href="##" class="close-create-post close-btn">
            <ion-icon name="close-outline"></ion-icon>
        </a>
        <br>
        <input type="text" placeholder="Title" required>
        <br>
        <select required>
            <option value="" disabled selected>Select Genre</option>
            <option value="artist-select">Artist Discussion</option>
            <option value="top-singles">Top New Singles</option>
            <option value="album-review">Album Review</option>
        </select>
        <br>
        <textarea id="message" placeholder="Text" name="message" rows="8" required></textarea>
        <br>
        <div class="center-btn">
            <input class="submit-button" type="submit" value="Post">
        </div>
    </dialog>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script>
        const createPost = document.querySelector('.create-post');
        const openCreatePost = document.querySelector('.open-create-post');
        const closeCreatePost = document.querySelectorAll('.close-create-post');

        openCreatePost.addEventListener('click', () => {
            createPost.showModal();
            document.querySelector("body").style.overflow = 'hidden';

            createPost.addEventListener('keydown', (event) => {
                if (event.keyCode === 27) { // escape 
                    createPost.close();
                    document.querySelector("body").style.overflow = 'visible';
                }
            });
        })

        for (let i = 0; i < closeCreatePost.length; i++) {
            closeCreatePost[i].addEventListener('click', () => {
                createPost.close();
                document.querySelector("body").style.overflow = 'visible';
            });
        }
    </script>
</body>
{% endblock %}